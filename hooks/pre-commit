#!/usr/bin/env python3
"""
Pre-commit hook to run Ruff, Mypy, and Pyright checks.
Aborts commit if any check fails.
"""

import subprocess
import sys

# Define checks (command as list)
CHECKS = [
    ["ruff", "check", "."],
    ["mypy", "--install-types", "--non-interactive", "."],
    ["pyright"],
]


def run_check(cmd):
    print(f"> {' '.join(cmd)}")
    result = subprocess.run(cmd)
    if result.returncode != 0:
        print(f"✖ {' '.join(cmd)} failed. Aborting commit.")
        sys.exit(result.returncode)
    else:
        print(f"✔ {' '.join(cmd)} passed.\n")


def main():
    print("Running pre-commit checks...\n")
    for check in CHECKS:
        run_check(check)
    print("✔ All checks passed. Proceeding with commit.")


if __name__ == "__main__":
    main()
